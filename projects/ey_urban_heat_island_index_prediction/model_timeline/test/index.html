<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ML Model Timeline</title>
    <script src="https://cdn.jsdelivr.net/npm/d3@4.13.0/build/d3.min.js" charset="utf-8"></script>
    <script src="https://cdn.jsdelivr.net/npm/taucharts@2/dist/taucharts.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/taucharts@2/dist/taucharts.min.css">
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>
    <style>
        #chart {
            width: 100%;
            height: 400px;
        }
    </style>
</head>
<body>
    <h1>ML Model Timeline</h1>
    <div id="chart"></div>
    <script>
                var datasource = [
                    {trial:'0', model_name:'sample benchmark', number_of_features:'3', notes:'test', models:'random forest', r2_score:0.3706},
                    {trial:'1', model_name:'submission', number_of_features:'14', notes:'test', models:'random forest', r2_score:0.5834}
        ];
    </script>


<script>
    // Function to fetch and parse the CSV file
    function loadCSV(filename, callback) {
        fetch(filename)
            .then(response => response.text())
            .then(csvData => {
                Papa.parse(csvData, {
                    header: true,  // Treat first row as headers
                    dynamicTyping: true,  // Convert numbers automatically
                    skipEmptyLines: true,  // Ignore empty lines
                    complete: function(results) {
                        const structuredData = results.data.map(row => ({
                            trial: row['trial'].toString(),
                            model_name: row['model name'],
                            number_of_features: row['number of features'].toString(),
                            notes: row['notes'],
                            models: row['models'],
                            r2_score: parseFloat(row['r2 score'])  // Ensure r2_score is a number
                        }));

                        console.log("Structured Data:", structuredData);
                        callback(structuredData);  // Use callback to process data further
                    }
                });
            })
            .catch(error => console.error('Error loading the CSV file:', error));
    }

    // Example usage: Load CSV and process data
    datasource = loadCSV('model_timeline.csv', function(data) {
        // Now you can use `data` for your timeline or any other visualization
    });
</script>


    <div id='line'>
    
    <script>
        var chart = new Taucharts.Chart({
        data:datasource,
        type:'line',
        x:'trial',
        y:'r2_score',
        size:null,
        plugins:
        [
        Taucharts.api.plugins.get('tooltip')(),
        Taucharts.api.plugins.get('legend')(),
        Taucharts.api.plugins.get('quick-filter')(),
        ]
        });
        chart.renderTo(document.getElementById('line'));
    </script>

    
</body>
</html>
