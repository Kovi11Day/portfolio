<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ML Model Timeline</title>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@4.13.0/build/d3.min.js" charset="utf-8"></script>
    <script src="https://cdn.jsdelivr.net/npm/taucharts@2/dist/taucharts.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/taucharts@2/dist/taucharts.min.css">

    <style>
        #chart {
            width: 100%;
            height: 400px;
        }
    </style>
</head>
<body>
    <h1>ML Model Timeline</h1>
    <div id="chart"></div>

    <script>
        // Function to fetch and parse the CSV file
        fetch('model_timeline.csv')
            .then(response => response.text())
            .then(csvData => {
                processCSV(csvData);
            })
            .catch(error => {
                console.error('Error loading the CSV file:', error);
            });

        // Function to process the CSV data
        function processCSV(csvData) {
            // Use PapaParse to parse CSV into a JSON object
            Papa.parse(csvData, {
                header: true,
                dynamicTyping: true,
                complete: function(results) {
                    // Create a dataset from the CSV data
                    var data = results.data.map(function(row) {
                        return {
                            id: row['trial'],          // Trial
                            name: row['model name'],   // Model Name
                            start: row['trial'],       // You can replace this with a real start time
                            end: row['trial'],         // You can replace this with a real end time
                            score: row['r2 score'],    // R² Score
                            notes: row['notes']        // Notes for the model
                        };
                    });
                    // Call Taucharts to render the timeline
                    renderTimeline(data);
                }
            });
        }

        // Function to render the Taucharts timeline
        function renderTimeline(data) {
            var chart = new TauCharts.Chart({
                type: 'timeline',
                x: 'start',
                y: 'name',
                size: 'score',
                color: 'score',
                data: data,
                guides: [
                    {value: 'score', label: 'Model Performance (R² Score)', position: 'left'}
                ],
                settings: {
                    legend: {
                        visible: false
                    }
                }
            });
            chart.renderTo('#chart');
        }
    </script>
</body>
</html>
